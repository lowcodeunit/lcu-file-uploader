{"version":3,"file":"lowcodeunit-lcu-file-uploader-common.js","sources":["ng://@lowcodeunit/lcu-file-uploader-common/lib/controls/models/image-message.model.ts","ng://@lowcodeunit/lcu-file-uploader-common/lib/controls/file-uploader/file-uploader.component.ts","ng://@lowcodeunit/lcu-file-uploader-common/lib/lcu-file-uploader.module.ts"],"sourcesContent":["export class ImageMessage{\r\n    Data: any;\r\n\r\n    Headers: string;\r\n\r\n    constructor(data: any, headers: string){\r\n        this.Data = data;\r\n        this.Headers = headers;\r\n    }\r\n\r\n}","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\r\nimport { FileUploader } from 'ng2-file-upload/ng2-file-upload';\r\nimport { ImageMessage } from '../models/image-message.model';\r\nimport { Observable } from 'rxjs/internal/Observable';\r\nimport { Base64Model, ConvertToBase64Util } from '@lcu-ide/common';\r\nimport { Subscriber } from 'rxjs/internal/Subscriber';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'lcu-file-uploader',\r\n  templateUrl: './file-uploader.component.html',\r\n  styleUrls: ['./file-uploader.component.scss']\r\n})\r\n\r\nexport class FileUploaderComponent implements OnInit {\r\n\r\n\r\npublic FileUploader: FileUploader; \r\n\r\npublic SelectedFiles: Array<ImageMessage>;\r\n\r\n// public base64: string;\r\n\r\nprotected _URL;\r\n@Input('url')\r\n  protected set URL(value: string){\r\n    this._URL = value;\r\n  }\r\n\r\n@Output('files-to-upload')\r\n  public FilesToUpload: EventEmitter<Array<ImageMessage>>;\r\n\r\n  constructor() { \r\n    this.SelectedFiles = new Array<ImageMessage>();\r\n    this.FilesToUpload = new EventEmitter<Array<ImageMessage>>();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.FileUploader = new FileUploader({url: this._URL});\r\n  }\r\n\r\n  /**\r\n   * Build the image message\r\n   *\r\n   * @param base64 base 64 string for the image\r\n   *\r\n   * @param file file data\r\n   */\r\n   protected buildImageMessage(base64: string, file: File){\r\n     const header = 'filename=' + file.name;\r\n     const tempIM: ImageMessage = new ImageMessage(base64, header);\r\n     this.SelectedFiles.push(tempIM);\r\n     console.log('selected files', this.SelectedFiles);\r\n   }\r\n\r\n\r\n   /**\r\n    * When a file is selected\r\n    *\r\n    * @param event need to figure out what the type is\r\n    */\r\n  public OnFileChanged(event: any) {\r\n    if (this.SelectedFiles) {\r\n     for (const itm of event.queue) {\r\n       ConvertToBase64Util.GetBase64(itm.file.rawFile)\r\n       .subscribe((result: Base64Model) => {\r\n          this.buildImageMessage(result.Blob, result.File);\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FileUploaderComponent } from './controls/file-uploader/file-uploader.component';\r\nimport { FileUploadModule } from 'ng2-file-upload/ng2-file-upload';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    FileUploaderComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FileUploadModule\r\n  ],\r\n  exports: [FileUploaderComponent, FileUploadModule],\r\n  entryComponents: [FileUploaderComponent]\r\n})\r\nexport class LcuFileUploaderModule { }\r\n"],"names":["tslib_1.__values"],"mappings":";;;;;;;;;;;AAAA;IAKI,sBAAY,IAAS,EAAE,OAAe;QAClC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;KAC1B;IAEL,mBAAC;CAAA,IAAA;;;IATG,4BAAU;;IAEV,+BAAgB;;;;;;;;IC6BlB;QACE,IAAI,CAAC,aAAa,GAAG,IAAI,KAAK,EAAgB,CAAC;QAC/C,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,EAAuB,CAAC;KAC9D;IAXH,sBACgB,sCAAG;;;;;;QADnB,UACoB,KAAa;YAC7B,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;SACnB;;;OAAA;;;;IAUD,wCAAQ;;;IAAR;QACE,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,EAAC,GAAG,EAAE,IAAI,CAAC,IAAI,EAAC,CAAC,CAAC;KACxD;;;;;;;;;;;;;;;;;IASU,iDAAiB;;;;;;;;;IAA3B,UAA4B,MAAc,EAAE,IAAU;;YAC9C,MAAM,GAAG,WAAW,GAAG,IAAI,CAAC,IAAI;;YAChC,MAAM,GAAiB,IAAI,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC;QAC7D,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAChC,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;KACnD;;;;;;;;;;;;IAQK,6CAAa;;;;;;IAApB,UAAqB,KAAU;QAA/B,iBASC;;QARC,IAAI,IAAI,CAAC,aAAa,EAAE;;gBACvB,KAAkB,IAAA,KAAAA,SAAA,KAAK,CAAC,KAAK,CAAA,gBAAA,4BAAE;oBAA1B,IAAM,GAAG,WAAA;oBACZ,mBAAmB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;yBAC9C,SAAS;;;;oBAAC,UAAC,MAAmB;wBAC5B,KAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;qBAClD,EAAC,CAAC;iBACJ;;;;;;;;;SACF;KACF;;gBA9DF,SAAS,SAAC;oBACT,QAAQ,EAAE,mBAAmB;oBAC7B,8eAA6C;;iBAE9C;;;;;sBAYA,KAAK,SAAC,KAAK;gCAKX,MAAM,SAAC,iBAAiB;;IA0CzB,4BAAC;CA/DD,IA+DC;;;IAtDD,6CAAkC;;IAElC,8CAA0C;;;;;IAI1C,qCAAe;;IAMf,8CAC0D;;;;;;;AC9B1D;IAOA;KAWsC;;gBAXrC,QAAQ,SAAC;oBACR,YAAY,EAAE;wBACZ,qBAAqB;qBACtB;oBACD,OAAO,EAAE;wBACP,YAAY;wBACZ,gBAAgB;qBACjB;oBACD,OAAO,EAAE,CAAC,qBAAqB,EAAE,gBAAgB,CAAC;oBAClD,eAAe,EAAE,CAAC,qBAAqB,CAAC;iBACzC;;IACoC,4BAAC;CAXtC;;;;;;;;;;;;;;"}