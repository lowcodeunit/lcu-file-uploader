{"version":3,"sources":["ng://@lowcodeunit/lcu-file-uploader-common/lib/controls/models/image-message.model.ts","ng://@lowcodeunit/lcu-file-uploader-common/lib/controls/file-uploader/file-uploader.component.ts","ng://@lowcodeunit/lcu-file-uploader-common/lib/lcu-file-uploader.module.ts"],"names":["ImageMessage","data","headers","this","Data","Headers","FileUploaderComponent","SelectedFiles","Array","FilesToUpload","EventEmitter","Object","defineProperty","prototype","value","_URL","ngOnInit","FileUploader","url","onFileChanged","event","i","queue","length","getBase64","file","rawFile","console","log","emit","me","reader","FileReader","readAsDataURL","onload","base64","result","toString","buildImageMessage","onerror","error","header","name","tempIM","push","Component","args","selector","template","Input","Output","LcuFileUploaderModule","NgModule","declarations","imports","CommonModule","FileUploadModule","exports","entryComponents"],"mappings":"8jBAAA,IAAAA,EAKI,SAAYC,EAAWC,GACnBC,KAAKC,KAAOH,EACZE,KAAKE,QAAUH,GCFvB,IAAAI,EAAA,WAwBE,SAAAA,IACEH,KAAKI,cAAgB,IAAIC,MACzBL,KAAKM,cAAgB,IAAIC,EAAAA,aAuC7B,OAjDEC,OAAAC,eACcN,EAAAO,UAAA,MAAG,KADjB,SACkBC,GAChBX,KAAKY,KAAOD,mCAWdR,EAAAO,UAAAG,SAAA,WACEb,KAAKc,aAAe,IAAIA,EAAAA,aAAa,CAAEC,IAAKf,KAAKY,QAG5CT,EAAAO,UAAAM,cAAP,SAAqBC,GACnB,GAAIjB,KAAKI,cACP,IAAK,IAAIc,EAAI,EAAGA,EAAID,EAAME,MAAMC,OAAQF,IACtClB,KAAKqB,UAAUJ,EAAME,MAAMD,GAAGI,KAAKC,SAIvCC,QAAQC,IAAI,sBAAuBzB,KAAKI,eACxCJ,KAAKM,cAAcoB,KAAK1B,KAAKI,gBAGrBD,EAAAO,UAAAW,UAAV,SAAoBJ,OACdK,EAAOL,EACPU,EAAK3B,KACL4B,EAAS,IAAIC,WACjBD,EAAOE,cAAcR,GACrBM,EAAOG,OAAM,WAEXJ,EAAGK,OAASJ,EAAOK,OAAOC,WAC1BP,EAAGQ,kBAAkBP,EAAOK,OAAOC,WAAYZ,IAEjDM,EAAOQ,QAAO,SAAIC,GAChBb,QAAQC,IAAI,UAAWY,KAIjBlC,EAAAO,UAAAyB,kBAAV,SAA4BH,EAAaV,OACnCgB,EAAS,YAAchB,EAAKiB,KAC5BC,EAAuB,IAAI3C,EAAamC,EAAQM,GACpDtC,KAAKI,cAAcqC,KAAKD,wBA9D3BE,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,oBACVC,SAAA,8xBAcCC,EAAAA,MAAKH,KAAA,CAAC,8BAKNI,EAAAA,OAAMJ,KAAA,CAAC,sBA4CVxC,EAjEA,GCLA,IAAA6C,EAAA,WAOA,SAAAA,KAWqC,2BAXpCC,EAAAA,SAAQN,KAAA,CAAC,CACRO,aAAc,CACZ/C,GAEFgD,QAAS,CACPC,EAAAA,aACAC,EAAAA,kBAEFC,QAAS,CAACnD,EAAuBkD,EAAAA,kBACjCE,gBAAiB,CAACpD,OAEiB6C,EAlBrC","sourcesContent":["export class ImageMessage{\r\n    Data: any;\r\n\r\n    Headers: string;\r\n\r\n    constructor(data: any, headers: string){\r\n        this.Data = data;\r\n        this.Headers = headers;\r\n    }\r\n\r\n}","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\r\nimport { FileUploader } from 'ng2-file-upload/ng2-file-upload';\r\nimport { ImageMessage } from '../models/image-message.model';\r\n// import { ConvertToBase64Util } from '@lcu-ide/common';\r\n\r\n@Component({\r\n  selector: 'lcu-file-uploader',\r\n  templateUrl: './file-uploader.component.html',\r\n  styleUrls: ['./file-uploader.component.scss']\r\n})\r\n\r\nexport class FileUploaderComponent implements OnInit {\r\n\r\n\r\n  public FileUploader: FileUploader;\r\n\r\n  public SelectedFiles: Array<ImageMessage>;\r\n\r\n  public base64: string;\r\n\r\n  protected _URL;\r\n  @Input('url')\r\n  protected set URL(value: string) {\r\n    this._URL = value;\r\n  }\r\n\r\n  @Output('files-to-upload')\r\n  public FilesToUpload: EventEmitter<Array<ImageMessage>>;\r\n\r\n  constructor() {\r\n    this.SelectedFiles = new Array<ImageMessage>();\r\n    this.FilesToUpload = new EventEmitter<Array<ImageMessage>>();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.FileUploader = new FileUploader({ url: this._URL });\r\n  }\r\n\r\n  public onFileChanged(event) {\r\n    if (this.SelectedFiles) {\r\n      for (let i = 0; i < event.queue.length; i++) {\r\n        this.getBase64(event.queue[i].file.rawFile);\r\n        // console.log(\"Object = \",ConvertToBase64Util.GetBase64(event.queue[i].file.rawFile));     \r\n      }\r\n    }\r\n    console.log(\"file(s) uploaded = \", this.SelectedFiles);\r\n    this.FilesToUpload.emit(this.SelectedFiles);\r\n  }\r\n\r\n  protected getBase64(event): any {\r\n    let file = event;\r\n    let me = this;\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n      //console.log(reader.result);\r\n      me.base64 = reader.result.toString();\r\n      me.buildImageMessage(reader.result.toString(), file);\r\n    };\r\n    reader.onerror = (error) => {\r\n      console.log('Error: ', error);\r\n    };\r\n  }\r\n\r\n  protected buildImageMessage(base64: any, file: File) {\r\n    let header = \"filename=\" + file.name;\r\n    let tempIM: ImageMessage = new ImageMessage(base64, header);\r\n    this.SelectedFiles.push(tempIM);\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FileUploaderComponent } from './controls/file-uploader/file-uploader.component';\r\nimport { FileUploadModule } from 'ng2-file-upload/ng2-file-upload';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    FileUploaderComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FileUploadModule\r\n  ],\r\n  exports: [FileUploaderComponent, FileUploadModule],\r\n  entryComponents: [FileUploaderComponent]\r\n})\r\nexport class LcuFileUploaderModule { }\r\n"]}