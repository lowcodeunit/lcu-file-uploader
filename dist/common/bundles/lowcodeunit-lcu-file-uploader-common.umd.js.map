{"version":3,"file":"lowcodeunit-lcu-file-uploader-common.umd.js","sources":["ng://@lowcodeunit/lcu-file-uploader-common/lib/controls/models/image-message.model.ts","ng://@lowcodeunit/lcu-file-uploader-common/lib/controls/file-uploader/file-uploader.component.ts","ng://@lowcodeunit/lcu-file-uploader-common/lib/lcu-file-uploader.module.ts"],"sourcesContent":["export class ImageMessage{\r\n    Data: any;\r\n\r\n    Headers: string;\r\n\r\n    constructor(data: any, headers: string){\r\n        this.Data = data;\r\n        this.Headers = headers;\r\n    }\r\n\r\n}","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\r\nimport { FileUploader } from 'ng2-file-upload/ng2-file-upload';\r\nimport { ImageMessage } from '../models/image-message.model';\r\n// import { ConvertToBase64Util } from '@lcu-ide/common';\r\n\r\n@Component({\r\n  selector: 'lcu-file-uploader',\r\n  templateUrl: './file-uploader.component.html',\r\n  styleUrls: ['./file-uploader.component.scss']\r\n})\r\n\r\nexport class FileUploaderComponent implements OnInit {\r\n\r\n\r\n  public FileUploader: FileUploader;\r\n\r\n  public SelectedFiles: Array<ImageMessage>;\r\n\r\n  public base64: string;\r\n\r\n  protected _URL;\r\n  @Input('url')\r\n  protected set URL(value: string) {\r\n    this._URL = value;\r\n  }\r\n\r\n  @Output('files-to-upload')\r\n  public FilesToUpload: EventEmitter<Array<ImageMessage>>;\r\n\r\n  constructor() {\r\n    this.SelectedFiles = new Array<ImageMessage>();\r\n    this.FilesToUpload = new EventEmitter<Array<ImageMessage>>();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.FileUploader = new FileUploader({ url: this._URL });\r\n  }\r\n\r\n  public onFileChanged(event) {\r\n    if (this.SelectedFiles) {\r\n      for (let i = 0; i < event.queue.length; i++) {\r\n        this.getBase64(event.queue[i].file.rawFile);\r\n        // console.log(\"Object = \",ConvertToBase64Util.GetBase64(event.queue[i].file.rawFile));     \r\n      }\r\n    }\r\n    console.log(\"file(s) uploaded = \", this.SelectedFiles);\r\n    this.FilesToUpload.emit(this.SelectedFiles);\r\n  }\r\n\r\n  protected getBase64(event): any {\r\n    let file = event;\r\n    let me = this;\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n      //console.log(reader.result);\r\n      me.base64 = reader.result.toString();\r\n      me.buildImageMessage(reader.result.toString(), file);\r\n    };\r\n    reader.onerror = (error) => {\r\n      console.log('Error: ', error);\r\n    };\r\n  }\r\n\r\n  protected buildImageMessage(base64: any, file: File) {\r\n    let header = \"filename=\" + file.name;\r\n    let tempIM: ImageMessage = new ImageMessage(base64, header);\r\n    this.SelectedFiles.push(tempIM);\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FileUploaderComponent } from './controls/file-uploader/file-uploader.component';\r\nimport { FileUploadModule } from 'ng2-file-upload/ng2-file-upload';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    FileUploaderComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FileUploadModule\r\n  ],\r\n  exports: [FileUploaderComponent, FileUploadModule],\r\n  entryComponents: [FileUploaderComponent]\r\n})\r\nexport class LcuFileUploaderModule { }\r\n"],"names":["EventEmitter","FileUploader","Component","Input","Output","NgModule","CommonModule","FileUploadModule"],"mappings":"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"}